<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Package overview â€¢ eia</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Package overview">
<meta property="og:description" content="eia">
<meta property="og:image" content="https://docs.ropensci.org/eia/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eia</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/eia.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/categories.html">Categories</a>
    </li>
    <li>
      <a href="../articles/series.html">Time series</a>
    </li>
    <li>
      <a href="../articles/geoset.html">Geosets</a>
    </li>
    <li>
      <a href="../articles/api.html">API details</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/eia">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="eia_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>Package overview</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/eia/blob/master/vignettes/eia.Rmd"><code>vignettes/eia.Rmd</code></a></small>
      <div class="hidden name"><code>eia.Rmd</code></div>

    </div>

    
    
<p>This vignette provides a brief overview of the most important functions in <code>eia</code>. Other vignettes go into greater depth on specific topics and API endpoints.</p>
<div id="api-key" class="section level2">
<h2 class="hasAnchor">
<a href="#api-key" class="anchor"></a>API key</h2>
<div id="register-a-key-with-eia" class="section level3">
<h3 class="hasAnchor">
<a href="#register-a-key-with-eia" class="anchor"></a>Register a key with EIA</h3>
<p>Obtaining an API key is easy and free.</p>
<p>Pulling data from the US Energy Information Administration (EIA) API requires a registered API key. A key can be obtained at no cost <a href="https://www.eia.gov/opendata/register.php">here</a>. A valid email and agreement to the API Terms of Service is required to obtain a key.</p>
<p>It is important to store your API key somewhere secure. Do not commit it to a repository or otherwise share it. For example, you could store it in your <code>.Renviron</code> file.</p>
</div>
<div id="key-storage-and-retrieval" class="section level3">
<h3 class="hasAnchor">
<a href="#key-storage-and-retrieval" class="anchor"></a>Key storage and retrieval</h3>
<p>You can always provide the <code>key</code> argument to every API function call, but you do not have to. There are getter and setter helpers available to make using <code>eia</code> functions a more seamless experience.</p>
<p><code>eia_set_key</code> gives you the option of storing your key for the duration of your R session.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/eia">eia</a></span><span class="op">)</span>
<span class="co"># eia_set_key("yourkey")</span>
<span class="co"># eia_get_key() # retrieve it</span></code></pre></div>
<p>If the key already exists in the system environment and you plan to pass <code>key</code> to functions explicitly, you could start as follows.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Sys.getenv.html">Sys.getenv</a></span><span class="op">(</span><span class="st">"EIA_KEY"</span><span class="op">)</span>

<span class="co"># or:</span>
<span class="va">key</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_key.html">eia_get_key</a></span><span class="op">(</span><span class="op">)</span></code></pre></div>
<p>In general, however, if your key is set globally such as in <code>.Renviron</code>, you do not need to do anything regarding the key when you use the package. See the vignette on API details for more information about all the options you have for key storage.</p>
</div>
</div>
<div id="eia-categories" class="section level2">
<h2 class="hasAnchor">
<a href="#eia-categories" class="anchor"></a>EIA categories</h2>
<p>Once you have your EIA registered API key and have it in place for your R session by whichever method you prefer, you are ready to begin accessing data from the EIA API.</p>
<p>It is helpful to be aware of various categories of data that are available. Each category has a unique ID number that is required to access associated data. The first call below does not include an ID. The result is a list of two data frames. The first is metadata associated with that position in the category hierarchy. The second is the child category information.</p>
<p>Here is the top-level category information.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;   category_id name          notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;</span>
<span class="co">#&gt; 1 371         EIA Data Sets ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childcategories</span>
<span class="co">#&gt; # A tibble: 14 x 2</span>
<span class="co">#&gt;    category_id name                               </span>
<span class="co">#&gt;          &lt;int&gt; &lt;chr&gt;                              </span>
<span class="co">#&gt;  1           0 Electricity                        </span>
<span class="co">#&gt;  2       40203 State Energy Data System (SEDS)    </span>
<span class="co">#&gt;  3      714755 Petroleum                          </span>
<span class="co">#&gt;  4      714804 Natural Gas                        </span>
<span class="co">#&gt;  5      711224 Total Energy                       </span>
<span class="co">#&gt;  6      717234 Coal                               </span>
<span class="co">#&gt;  7      829714 Short-Term Energy Outlook          </span>
<span class="co">#&gt;  8      964164 Annual Energy Outlook              </span>
<span class="co">#&gt;  9     1292190 Crude Oil Imports                  </span>
<span class="co">#&gt; 10     2123635 U.S. Electric System Operating Data</span>
<span class="co">#&gt; 11     2134384 International Energy Data          </span>
<span class="co">#&gt; 12     2251604 CO2 Emissions                      </span>
<span class="co">#&gt; 13     2631064 International Energy Outlook       </span>
<span class="co">#&gt; 14     2889994 U.S. Nuclear Outages</span></code></pre></div>
<p>The child category IDs can be used to query results from that category.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   category_id parent_category_id name        notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;       &lt;chr&gt;</span>
<span class="co">#&gt; 1 0           371                Electricity ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childcategories</span>
<span class="co">#&gt; # A tibble: 19 x 2</span>
<span class="co">#&gt;    category_id name                                                              </span>
<span class="co">#&gt;          &lt;int&gt; &lt;chr&gt;                                                             </span>
<span class="co">#&gt;  1           1 Net generation                                                    </span>
<span class="co">#&gt;  2          35 Total consumption                                                 </span>
<span class="co">#&gt;  3          32 Total consumption (Btu)                                           </span>
<span class="co">#&gt;  4          36 Consumption for electricity generation                            </span>
<span class="co">#&gt;  5          33 Consumption for electricity generation (Btu)                      </span>
<span class="co">#&gt;  6          37 Consumption for useful thermal output                             </span>
<span class="co">#&gt;  7          34 Consumption for useful thermal output (Btu)                       </span>
<span class="co">#&gt;  8        1017 Plant level data                                                  </span>
<span class="co">#&gt;  9          38 Retail sales of electricity                                       </span>
<span class="co">#&gt; 10          39 Revenue from retail sales of electricity                          </span>
<span class="co">#&gt; 11          40 Average retail price of electricity                               </span>
<span class="co">#&gt; 12     1718389 Number of customer accounts                                       </span>
<span class="co">#&gt; 13       41137 Fossil-fuel stocks for electricity generation                     </span>
<span class="co">#&gt; 14       41138 Receipts of fossil fuels by electricity plants                    </span>
<span class="co">#&gt; 15       41139 Receipts of fossil fuels by electricity plants (Btu)              </span>
<span class="co">#&gt; 16       41140 Average cost of fossil fuels for electricity generation           </span>
<span class="co">#&gt; 17       41141 Average cost of fossil fuels for electricity generation (per Btu) </span>
<span class="co">#&gt; 18       41142 Quality of fossil fuels in electricity generation : sulfur content</span>
<span class="co">#&gt; 19       41143 Quality of fossil fuels in electricity generation : ash content</span></code></pre></div>
</div>
<div id="eia-time-series-data" class="section level2">
<h2 class="hasAnchor">
<a href="#eia-time-series-data" class="anchor"></a>EIA time series data</h2>
<p>Time series data is obtained by series ID. Most columns contain metadata. The <code>data</code> column contains the time series data.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">id</span> <span class="op">&lt;-</span> <span class="st">"ELEC.GEN.ALL-AK-99.A"</span>
<span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, start <span class="op">=</span> <span class="fl">2010</span>, end <span class="op">=</span> <span class="fl">2019</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 1 x 13</span>
<span class="co">#&gt;   series_id     name                     units       f     description                       copyright source              iso3166 geography start end   updated      data     </span>
<span class="co">#&gt;   &lt;chr&gt;         &lt;chr&gt;                    &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;                             &lt;chr&gt;     &lt;chr&gt;               &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;        &lt;list&gt;   </span>
<span class="co">#&gt; 1 ELEC.GEN.ALL~ Net generation : all fu~ thousand m~ A     "Summation of all fuels used for~ None      EIA, U.S. Energy I~ USA-AK  USA-AK    2001  2019  2020-10-27T~ &lt;tibble ~</span>

<span class="va">x</span><span class="op">$</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 10 x 3</span>
<span class="co">#&gt;    value date        year</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;</span>
<span class="co">#&gt;  1 6071. 2019-01-01  2019</span>
<span class="co">#&gt;  2 6247. 2018-01-01  2018</span>
<span class="co">#&gt;  3 6497. 2017-01-01  2017</span>
<span class="co">#&gt;  4 6335. 2016-01-01  2016</span>
<span class="co">#&gt;  5 6285. 2015-01-01  2015</span>
<span class="co">#&gt;  6 6043. 2014-01-01  2014</span>
<span class="co">#&gt;  7 6497. 2013-01-01  2013</span>
<span class="co">#&gt;  8 6946. 2012-01-01  2012</span>
<span class="co">#&gt;  9 6871. 2011-01-01  2011</span>
<span class="co">#&gt; 10 6760. 2010-01-01  2010</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">units</span>, <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Year"</span>, y <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">units</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, title <span class="op">=</span> <span class="st">"Net Alaska electricity generation"</span>,
       subtitle <span class="op">=</span> <span class="st">"From all fuels"</span>, caption <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">description</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span></code></pre></div>
<p><img src="eia-series1-1.png" title="plot of chunk series1" alt="plot of chunk series1" width="100%"></p>
<p>You can provide arguments like the following:</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span> <span class="co"># max results</span>
<span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># most recent five</span>
<span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, end <span class="op">=</span> <span class="fl">2016</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="co"># ending in 2016</span>
<span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, start <span class="op">=</span> <span class="fl">2000</span>, end <span class="op">=</span> <span class="fl">2016</span><span class="op">)</span> <span class="co"># specific period</span></code></pre></div>
<p>As with <code>eia_cats</code>, the output format does not need to be tidy:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, n <span class="op">=</span> <span class="fl">5</span>, tidy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span> <span class="co"># results of jsonlite::fromJSON</span>
<span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, n <span class="op">=</span> <span class="fl">5</span>, tidy <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="co"># origina JSON as character string</span></code></pre></div>
<p>This allows you to use the returned results with existing code you may have that requires data in one of these less processed structures.</p>
</div>
<div id="eia-geosets" class="section level2">
<h2 class="hasAnchor">
<a href="#eia-geosets" class="anchor"></a>EIA geosets</h2>
<p>Geosets are metadata structures organizing time series datasets that can be mapped. Arguments to <code>eia_geoset</code> are the same as <code>eia_series</code> with the addition of <code>region</code>. Like <code>id</code>, <code>region</code> can be a vector. Most of the details are the same as before.</p>
<p>In the example below using total electricity generation, get the last two data points for each of and two US states. <code>dplyr</code> and <code>tidyr</code> are used here to clean up the result a bit for purposes of display. <code>gpplot2</code> is used to graph the data after it has been unnested for each state.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"ELEC.GEN.ALL-99.M"</span><span class="op">)</span> <span class="co"># monthly</span>
<span class="va">region</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"USA-CA"</span>, <span class="st">"USA-NY"</span><span class="op">)</span>
<span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_geoset.html">eia_geoset</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">region</span>, start <span class="op">=</span> <span class="st">"201801"</span>, end <span class="op">=</span> <span class="st">"201812"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 2 x 11</span>
<span class="co">#&gt;   geoset_id       setname                             f     units            series_id        name                                       region latlon start end   data        </span>
<span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;                               &lt;chr&gt; &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;                                      &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt; &lt;chr&gt; &lt;list&gt;      </span>
<span class="co">#&gt; 1 ELEC.GEN.ALL-9~ Net generation : all fuels : all s~ M     thousand megawa~ ELEC.GEN.ALL-CA~ Net generation : all fuels : California :~ USA-CA &lt;NA&gt;   2001~ 2020~ &lt;tibble [12~</span>
<span class="co">#&gt; 2 ELEC.GEN.ALL-9~ Net generation : all fuels : all s~ M     thousand megawa~ ELEC.GEN.ALL-NY~ Net generation : all fuels : New York : a~ USA-NY &lt;NA&gt;   2001~ 2020~ &lt;tibble [12~</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">region</span>, <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 24 x 5</span>
<span class="co">#&gt;    region  value date        year month</span>
<span class="co">#&gt;    &lt;chr&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1 USA-CA 14364. 2018-12-01  2018    12</span>
<span class="co">#&gt;  2 USA-CA 14605. 2018-11-01  2018    11</span>
<span class="co">#&gt;  3 USA-CA 16864. 2018-10-01  2018    10</span>
<span class="co">#&gt;  4 USA-CA 17592. 2018-09-01  2018     9</span>
<span class="co">#&gt;  5 USA-CA 20994. 2018-08-01  2018     8</span>
<span class="co">#&gt;  6 USA-CA 22356. 2018-07-01  2018     7</span>
<span class="co">#&gt;  7 USA-CA 17514. 2018-06-01  2018     6</span>
<span class="co">#&gt;  8 USA-CA 15932. 2018-05-01  2018     5</span>
<span class="co">#&gt;  9 USA-CA 14811. 2018-04-01  2018     4</span>
<span class="co">#&gt; 10 USA-CA 14039. 2018-03-01  2018     3</span>
<span class="co">#&gt; # ... with 14 more rows</span>

<span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span><span class="va">x</span>, cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">value</span>, color <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">units</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, title <span class="op">=</span> <span class="st">"Net electricity generation"</span>, subtitle <span class="op">=</span> <span class="st">"From all fuels"</span><span class="op">)</span></code></pre></div>
<p><img src="eia-geoset1-1.png" title="plot of chunk geoset1" alt="plot of chunk geoset1" width="100%"></p>
<p>Another convenience of <code>eia_geoset</code> is the ability to provide regions in the following forms.</p>
<ul>
<li>2-character US state abbreviations</li>
<li>State names</li>
<li>US Census region names</li>
<li>US census division names</li>
</ul>
<p>These shortcuts make it easier to construct an API call involving several states.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">region</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"AK"</span>, <span class="st">"New England"</span><span class="op">)</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_geoset.html">eia_geoset</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">region</span>, n <span class="op">=</span> <span class="fl">2</span><span class="op">)</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">region</span>, <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 14 x 5</span>
<span class="co">#&gt;    region value date        year month</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1 USA-AK  534. 2020-08-01  2020     8</span>
<span class="co">#&gt;  2 USA-AK  626. 2020-07-01  2020     7</span>
<span class="co">#&gt;  3 USA-CT 4001. 2020-08-01  2020     8</span>
<span class="co">#&gt;  4 USA-CT 4443. 2020-07-01  2020     7</span>
<span class="co">#&gt;  5 USA-MA 2200. 2020-08-01  2020     8</span>
<span class="co">#&gt;  6 USA-MA 2754. 2020-07-01  2020     7</span>
<span class="co">#&gt;  7 USA-ME  861. 2020-08-01  2020     8</span>
<span class="co">#&gt;  8 USA-ME  962. 2020-07-01  2020     7</span>
<span class="co">#&gt;  9 USA-NH 1632. 2020-08-01  2020     8</span>
<span class="co">#&gt; 10 USA-NH 1794. 2020-07-01  2020     7</span>
<span class="co">#&gt; 11 USA-RI  889. 2020-08-01  2020     8</span>
<span class="co">#&gt; 12 USA-RI  845. 2020-07-01  2020     7</span>
<span class="co">#&gt; 13 USA-VT  194. 2020-08-01  2020     8</span>
<span class="co">#&gt; 14 USA-VT  203. 2020-07-01  2020     7</span>

<span class="va">region</span> <span class="op">&lt;-</span> <span class="st">"Middle Atlantic"</span>
<span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_geoset.html">eia_geoset</a></span><span class="op">(</span><span class="va">id</span>, <span class="va">region</span>, n <span class="op">=</span> <span class="fl">12</span><span class="op">)</span>
<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">region</span>, <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 36 x 5</span>
<span class="co">#&gt;    region value date        year month</span>
<span class="co">#&gt;    &lt;chr&gt;  &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt;  1 USA-NJ 6639. 2020-08-01  2020     8</span>
<span class="co">#&gt;  2 USA-NJ 7385. 2020-07-01  2020     7</span>
<span class="co">#&gt;  3 USA-NJ 5721. 2020-06-01  2020     6</span>
<span class="co">#&gt;  4 USA-NJ 4169. 2020-05-01  2020     5</span>
<span class="co">#&gt;  5 USA-NJ 4334. 2020-04-01  2020     4</span>
<span class="co">#&gt;  6 USA-NJ 4469. 2020-03-01  2020     3</span>
<span class="co">#&gt;  7 USA-NJ 4912. 2020-02-01  2020     2</span>
<span class="co">#&gt;  8 USA-NJ 5488. 2020-01-01  2020     1</span>
<span class="co">#&gt;  9 USA-NJ 6193. 2019-12-01  2019    12</span>
<span class="co">#&gt; 10 USA-NJ 5510. 2019-11-01  2019    11</span>
<span class="co">#&gt; # ... with 26 more rows</span>

<span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span><span class="va">x</span>, cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">value</span>, color <span class="op">=</span> <span class="va">region</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html">geom_line</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>y <span class="op">=</span> <span class="va">x</span><span class="op">$</span><span class="va">units</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, title <span class="op">=</span> <span class="st">"Net electricity generation"</span>, subtitle <span class="op">=</span> <span class="st">"From all fuels"</span><span class="op">)</span></code></pre></div>
<p><img src="eia-geoset2-1.png" title="plot of chunk geoset2" alt="plot of chunk geoset2" width="100%"></p>
<p>Even more convenient is that these names are available in R. See the <code>datasets::state.*</code> functions and the geoset vignette.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/leonawicz">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
