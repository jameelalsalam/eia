<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>EIA time series data â€¢ eia</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="EIA time series data">
<meta property="og:description" content="eia">
<meta property="og:image" content="https://docs.ropensci.org/eia/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">eia</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.3.7</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa-home"></span>
     
    Home
  </a>
</li>
<li>
  <a href="../articles/eia.html">Get Started</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/categories.html">Categories</a>
    </li>
    <li>
      <a href="../articles/series.html">Time series</a>
    </li>
    <li>
      <a href="../articles/geoset.html">Geosets</a>
    </li>
    <li>
      <a href="../articles/api.html">API details</a>
    </li>
  </ul>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/ropensci/eia">
    <span class="fas fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><script src="series_files/accessible-code-block-0.0.1/empty-anchor.js"></script><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>EIA time series data</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci/eia/blob/master/vignettes/series.Rmd"><code>vignettes/series.Rmd</code></a></small>
      <div class="hidden name"><code>series.Rmd</code></div>

    </div>

    
    
<div id="finding-the-series-id" class="section level2">
<h2 class="hasAnchor">
<a href="#finding-the-series-id" class="anchor"></a>Finding the series ID</h2>
<p>Like category information, time series data is obtained based on its ID. A complete example includes finding the ID for the series if you do not already know it. Chances are you may already know the series IDs you need after using the API explorer on the EIA website. Below, look for total electricity consumption.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/eia">eia</a></span><span class="op">)</span>
<span class="co"># eia_set_key("yourkey") # set API key if not already set globally</span>
<span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 3</span>
<span class="co">#&gt;   category_id name          notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;         &lt;chr&gt;</span>
<span class="co">#&gt; 1 371         EIA Data Sets ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childcategories</span>
<span class="co">#&gt; # A tibble: 14 x 2</span>
<span class="co">#&gt;    category_id name                               </span>
<span class="co">#&gt;          &lt;int&gt; &lt;chr&gt;                              </span>
<span class="co">#&gt;  1           0 Electricity                        </span>
<span class="co">#&gt;  2       40203 State Energy Data System (SEDS)    </span>
<span class="co">#&gt;  3      714755 Petroleum                          </span>
<span class="co">#&gt;  4      714804 Natural Gas                        </span>
<span class="co">#&gt;  5      711224 Total Energy                       </span>
<span class="co">#&gt;  6      717234 Coal                               </span>
<span class="co">#&gt;  7      829714 Short-Term Energy Outlook          </span>
<span class="co">#&gt;  8      964164 Annual Energy Outlook              </span>
<span class="co">#&gt;  9     1292190 Crude Oil Imports                  </span>
<span class="co">#&gt; 10     2123635 U.S. Electric System Operating Data</span>
<span class="co">#&gt; 11     2134384 International Energy Data          </span>
<span class="co">#&gt; 12     2251604 CO2 Emissions                      </span>
<span class="co">#&gt; 13     2631064 International Energy Outlook       </span>
<span class="co">#&gt; 14     2889994 U.S. Nuclear Outages</span></code></pre></div>
<p>Electricity has category ID 0. Take a closer look there.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="fl">0</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   category_id parent_category_id name        notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;       &lt;chr&gt;</span>
<span class="co">#&gt; 1 0           371                Electricity ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childcategories</span>
<span class="co">#&gt; # A tibble: 19 x 2</span>
<span class="co">#&gt;    category_id name                                                              </span>
<span class="co">#&gt;          &lt;int&gt; &lt;chr&gt;                                                             </span>
<span class="co">#&gt;  1           1 Net generation                                                    </span>
<span class="co">#&gt;  2          35 Total consumption                                                 </span>
<span class="co">#&gt;  3          32 Total consumption (Btu)                                           </span>
<span class="co">#&gt;  4          36 Consumption for electricity generation                            </span>
<span class="co">#&gt;  5          33 Consumption for electricity generation (Btu)                      </span>
<span class="co">#&gt;  6          37 Consumption for useful thermal output                             </span>
<span class="co">#&gt;  7          34 Consumption for useful thermal output (Btu)                       </span>
<span class="co">#&gt;  8        1017 Plant level data                                                  </span>
<span class="co">#&gt;  9          38 Retail sales of electricity                                       </span>
<span class="co">#&gt; 10          39 Revenue from retail sales of electricity                          </span>
<span class="co">#&gt; 11          40 Average retail price of electricity                               </span>
<span class="co">#&gt; 12     1718389 Number of customer accounts                                       </span>
<span class="co">#&gt; 13       41137 Fossil-fuel stocks for electricity generation                     </span>
<span class="co">#&gt; 14       41138 Receipts of fossil fuels by electricity plants                    </span>
<span class="co">#&gt; 15       41139 Receipts of fossil fuels by electricity plants (Btu)              </span>
<span class="co">#&gt; 16       41140 Average cost of fossil fuels for electricity generation           </span>
<span class="co">#&gt; 17       41141 Average cost of fossil fuels for electricity generation (per Btu) </span>
<span class="co">#&gt; 18       41142 Quality of fossil fuels in electricity generation : sulfur content</span>
<span class="co">#&gt; 19       41143 Quality of fossil fuels in electricity generation : ash content</span></code></pre></div>
<p>There are two categories referring to total consumption. Take category ID 32 as an example and step deeper into the category hierarchy.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="fl">32</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   category_id parent_category_id name                    notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;                   &lt;chr&gt;</span>
<span class="co">#&gt; 1 32          0                  Total consumption (Btu) ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childcategories</span>
<span class="co">#&gt; # A tibble: 2 x 2</span>
<span class="co">#&gt;   category_id name        </span>
<span class="co">#&gt;         &lt;int&gt; &lt;chr&gt;       </span>
<span class="co">#&gt; 1         373 By fuel type</span>
<span class="co">#&gt; 2         372 By sector</span></code></pre></div>
<p>At this point you have a choice between total consumption by sector or fuel type. Select by sector.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="fl">372</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   category_id parent_category_id name      notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;     &lt;chr&gt;</span>
<span class="co">#&gt; 1 372         32                 By sector ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childcategories</span>
<span class="co">#&gt; # A tibble: 11 x 2</span>
<span class="co">#&gt;    category_id name                               </span>
<span class="co">#&gt;          &lt;int&gt; &lt;chr&gt;                              </span>
<span class="co">#&gt;  1         388 Electric power (total)             </span>
<span class="co">#&gt;  2         389 Electric utility                   </span>
<span class="co">#&gt;  3         390 Independent power producers (total)</span>
<span class="co">#&gt;  4         391 Electric utility non-cogen         </span>
<span class="co">#&gt;  5         392 Electric utility cogen             </span>
<span class="co">#&gt;  6         393 All commercial (total)             </span>
<span class="co">#&gt;  7         394 Commercial non-cogen               </span>
<span class="co">#&gt;  8         395 Commercial cogen                   </span>
<span class="co">#&gt;  9         396 All industrial (total)             </span>
<span class="co">#&gt; 10         397 Industrial non-cogen               </span>
<span class="co">#&gt; 11         398 Industrial cogen</span></code></pre></div>
<p>Then total electrical power.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="fl">388</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   category_id parent_category_id name                   notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt;                  &lt;chr&gt;</span>
<span class="co">#&gt; 1 388         372                Electric power (total) ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childcategories</span>
<span class="co">#&gt; # A tibble: 4 x 2</span>
<span class="co">#&gt;   category_id name             </span>
<span class="co">#&gt;         &lt;int&gt; &lt;chr&gt;            </span>
<span class="co">#&gt; 1         738 Coal             </span>
<span class="co">#&gt; 2         739 Petroleum liquids</span>
<span class="co">#&gt; 3         740 Petroleum coke   </span>
<span class="co">#&gt; 4         741 Natural gas</span></code></pre></div>
<p>And finally coal.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_cats.html">eia_cats</a></span><span class="op">(</span><span class="fl">738</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; $category</span>
<span class="co">#&gt; # A tibble: 1 x 4</span>
<span class="co">#&gt;   category_id parent_category_id name  notes</span>
<span class="co">#&gt;   &lt;chr&gt;       &lt;chr&gt;              &lt;chr&gt; &lt;chr&gt;</span>
<span class="co">#&gt; 1 738         388                Coal  ""   </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $childseries</span>
<span class="co">#&gt; # A tibble: 174 x 5</span>
<span class="co">#&gt;    series_id                     name                                                                           f     units         updated              </span>
<span class="co">#&gt;    &lt;chr&gt;                         &lt;chr&gt;                                                                          &lt;chr&gt; &lt;chr&gt;         &lt;chr&gt;                </span>
<span class="co">#&gt;  1 ELEC.CONS_TOT_BTU.COW-AK-98.A Total consumption (Btu) : coal : Alaska : electric power (total) : annual      A     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  2 ELEC.CONS_TOT_BTU.COW-AK-98.M Total consumption (Btu) : coal : Alaska : electric power (total) : monthly     M     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  3 ELEC.CONS_TOT_BTU.COW-AK-98.Q Total consumption (Btu) : coal : Alaska : electric power (total) : quarterly   Q     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  4 ELEC.CONS_TOT_BTU.COW-AL-98.A Total consumption (Btu) : coal : Alabama : electric power (total) : annual     A     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  5 ELEC.CONS_TOT_BTU.COW-AL-98.M Total consumption (Btu) : coal : Alabama : electric power (total) : monthly    M     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  6 ELEC.CONS_TOT_BTU.COW-AL-98.Q Total consumption (Btu) : coal : Alabama : electric power (total) : quarterly  Q     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  7 ELEC.CONS_TOT_BTU.COW-AR-98.A Total consumption (Btu) : coal : Arkansas : electric power (total) : annual    A     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  8 ELEC.CONS_TOT_BTU.COW-AR-98.M Total consumption (Btu) : coal : Arkansas : electric power (total) : monthly   M     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt;  9 ELEC.CONS_TOT_BTU.COW-AR-98.Q Total consumption (Btu) : coal : Arkansas : electric power (total) : quarterly Q     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt; 10 ELEC.CONS_TOT_BTU.COW-AZ-98.A Total consumption (Btu) : coal : Arizona : electric power (total) : annual     A     million MMBtu 27-OCT-20 06.46.54 PM</span>
<span class="co">#&gt; # ... with 164 more rows</span></code></pre></div>
</div>
<div id="available-child-series" class="section level2">
<h2 class="hasAnchor">
<a href="#available-child-series" class="anchor"></a>Available child series</h2>
<p>At this point you have reached a terminal node of the category tree. Instead of another table of child category IDs and names in the result, there is a <code>childseries</code> table.</p>
<p>This table contains:</p>
<ul>
<li>time series IDs</li>
<li>names that describe the nested position of the data in the overall category hierarchy</li>
<li>time format</li>
<li>units</li>
<li>the time stamp of the most recent data update</li>
</ul>
<p>Each row in this table represents a unique time series dataset; in this case for different states and in annual, quarterly and monthly time steps. TO obtain the time series data, make a request using <code>eia_series</code> and provide a series ID.</p>
</div>
<div id="time-formats" class="section level2">
<h2 class="hasAnchor">
<a href="#time-formats" class="anchor"></a>Time formats</h2>
<p>To see how the different time formats are parsed, take the first three IDs for Alaska. Request only the three most recent results for each series.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">id</span> <span class="op">&lt;-</span> <span class="va">x</span><span class="op">$</span><span class="va">childseries</span><span class="op">$</span><span class="va">series_id</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span><span class="op">]</span>
<span class="va">x1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">x2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">x3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></code></pre></div>
<p>The format of each result is the same. Inspect the first one. It is a data frame with one row. All but the final column, <code>data</code>, give metadata about the series. <code>data</code> is a list column (in this case of length one) that can be extracted directly or unnested using <code><a href="https://tidyr.tidyverse.org/reference/nest.html">tidyr::unnest</a></code>.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org">dplyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyr.tidyverse.org">tidyr</a></span><span class="op">)</span>
<span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org">ggplot2</a></span><span class="op">)</span>

<span class="va">x1</span><span class="op">$</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   value date        year</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 11.0  2019-01-01  2019</span>
<span class="co">#&gt; 2 10.4  2018-01-01  2018</span>
<span class="co">#&gt; 3  9.21 2017-01-01  2017</span>

<span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">x1</span>, <span class="va">series_id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;   series_id                     value date        year</span>
<span class="co">#&gt;   &lt;chr&gt;                         &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-98.A 11.0  2019-01-01  2019</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-98.A 10.4  2018-01-01  2018</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-98.A  9.21 2017-01-01  2017</span>

<span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span><span class="va">x1</span>, cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html">ggplot</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html">aes</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span><span class="va">year</span><span class="op">)</span>, <span class="va">value</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html">geom_col</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span>
  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html">labs</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Year"</span>, y <span class="op">=</span> <span class="va">x1</span><span class="op">$</span><span class="va">units</span>, title <span class="op">=</span> <span class="st">"Total Alaska electricity consumption"</span>,
       subtitle <span class="op">=</span> <span class="st">"From coal sources"</span>, caption <span class="op">=</span> <span class="va">x1</span><span class="op">$</span><span class="va">description</span><span class="op">)</span></code></pre></div>
<p><img src="series-series2-1.png" title="plot of chunk series2" alt="plot of chunk series2" width="100%"></p>
<p>Results are similarly structured for the other series, but the columns containing date information differ.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x1</span><span class="op">$</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   value date        year</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 11.0  2019-01-01  2019</span>
<span class="co">#&gt; 2 10.4  2018-01-01  2018</span>
<span class="co">#&gt; 3  9.21 2017-01-01  2017</span>
<span class="va">x2</span><span class="op">$</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;    value date        year month</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 NA     2020-08-01  2020     8</span>
<span class="co">#&gt; 2 NA     2020-07-01  2020     7</span>
<span class="co">#&gt; 3  0.770 2020-06-01  2020     6</span>
<span class="va">x3</span><span class="op">$</span><span class="va">data</span><span class="op">[[</span><span class="fl">1</span><span class="op">]</span><span class="op">]</span>
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;   value date        year   qtr</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 NA    2020-04-01  2020     2</span>
<span class="co">#&gt; 2 NA    2020-01-01  2020     1</span>
<span class="co">#&gt; 3  3.05 2019-10-01  2019     4</span></code></pre></div>
</div>
<div id="multiple-series" class="section level2">
<h2 class="hasAnchor">
<a href="#multiple-series" class="anchor"></a>Multiple series</h2>
<p>The EIA API allows multiple series to be requested in a single API call. You should do this whenever possible to reduce the number of requests you make. To request the same data as above, just provide the <code>id</code> vector. Other arguments like <code>n</code> are not vectorized.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, n <span class="op">=</span> <span class="fl">3</span><span class="op">)</span>
<span class="va">x</span>
<span class="co">#&gt; # A tibble: 3 x 13</span>
<span class="co">#&gt;   series_id       name                      units    f     description                            copyright source           iso3166 geography start end   updated     data    </span>
<span class="co">#&gt;   &lt;chr&gt;           &lt;chr&gt;                     &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;                                  &lt;chr&gt;     &lt;chr&gt;            &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;list&gt;  </span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_~ Total consumption (Btu) ~ million~ A     "Summation of all types of coal; Powe~ None      EIA, U.S. Energ~ USA-AK  USA-AK    2001  2019  2020-10-27~ &lt;tibble~</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_~ Total consumption (Btu) ~ million~ M     "Summation of all types of coal; Powe~ None      EIA, U.S. Energ~ USA-AK  USA-AK    2001~ 2020~ 2020-10-27~ &lt;tibble~</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_~ Total consumption (Btu) ~ million~ Q     "Summation of all types of coal; Powe~ None      EIA, U.S. Energ~ USA-AK  USA-AK    2001~ 2020~ 2020-10-27~ &lt;tibble~</span></code></pre></div>
<p>There are now three rows in the table containing the same data as before. The <code>data</code> list column also contains the same structures as before.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="va">x</span><span class="op">$</span><span class="va">data</span>
<span class="co">#&gt; [[1]]</span>
<span class="co">#&gt; # A tibble: 3 x 3</span>
<span class="co">#&gt;   value date        year</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt;</span>
<span class="co">#&gt; 1 11.0  2019-01-01  2019</span>
<span class="co">#&gt; 2 10.4  2018-01-01  2018</span>
<span class="co">#&gt; 3  9.21 2017-01-01  2017</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[2]]</span>
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;    value date        year month</span>
<span class="co">#&gt;    &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 NA     2020-08-01  2020     8</span>
<span class="co">#&gt; 2 NA     2020-07-01  2020     7</span>
<span class="co">#&gt; 3  0.770 2020-06-01  2020     6</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; [[3]]</span>
<span class="co">#&gt; # A tibble: 3 x 4</span>
<span class="co">#&gt;   value date        year   qtr</span>
<span class="co">#&gt;   &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 NA    2020-04-01  2020     2</span>
<span class="co">#&gt; 2 NA    2020-01-01  2020     1</span>
<span class="co">#&gt; 3  3.05 2019-10-01  2019     4</span></code></pre></div>
<p>These can be unnested and filled in with <code>NA</code> as needed.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html">select</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">series_id</span>, <span class="va">data</span><span class="op">)</span> <span class="op">%&gt;%</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/nest.html">unnest</a></span><span class="op">(</span>cols <span class="op">=</span> <span class="va">data</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 9 x 6</span>
<span class="co">#&gt;   series_id                      value date        year month   qtr</span>
<span class="co">#&gt;   &lt;chr&gt;                          &lt;dbl&gt; &lt;date&gt;     &lt;int&gt; &lt;int&gt; &lt;int&gt;</span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-98.A 11.0   2019-01-01  2019    NA    NA</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-98.A 10.4   2018-01-01  2018    NA    NA</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-98.A  9.21  2017-01-01  2017    NA    NA</span>
<span class="co">#&gt; 4 ELEC.CONS_TOT_BTU.COW-AK-98.M NA     2020-08-01  2020     8    NA</span>
<span class="co">#&gt; 5 ELEC.CONS_TOT_BTU.COW-AK-98.M NA     2020-07-01  2020     7    NA</span>
<span class="co">#&gt; 6 ELEC.CONS_TOT_BTU.COW-AK-98.M  0.770 2020-06-01  2020     6    NA</span>
<span class="co">#&gt; 7 ELEC.CONS_TOT_BTU.COW-AK-98.Q NA     2020-04-01  2020    NA     2</span>
<span class="co">#&gt; 8 ELEC.CONS_TOT_BTU.COW-AK-98.Q NA     2020-01-01  2020    NA     1</span>
<span class="co">#&gt; 9 ELEC.CONS_TOT_BTU.COW-AK-98.Q  3.05  2019-10-01  2019    NA     4</span></code></pre></div>
</div>
<div id="time-period-and-number-of-results" class="section level2">
<h2 class="hasAnchor">
<a href="#time-period-and-number-of-results" class="anchor"></a>Time period and number of results</h2>
<p>Here are some things to keep in mind about <code>eia_series</code> arguments.</p>
<ul>
<li>The function only makes one API call, combining multiple series IDs if provided.</li>
<li>If there are fewer results than you request, everything available is returned.</li>
<li>Results are from the most recent unless using <code>start</code> alone.</li>
<li>If you provide <code>start</code> and <code>end</code>, <code>n</code> is ignored.</li>
<li>If you do not provide a closed period or <code>n</code>, you will receive all relevant data available, subject to any API limits.</li>
<li>Depending on the nature of the request, you may have to construct more than one call.</li>
</ul>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, n <span class="op">=</span> <span class="fl">10</span><span class="op">)</span>
<span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, end <span class="op">=</span> <span class="fl">2016</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, start <span class="op">=</span> <span class="fl">2000</span>, end <span class="op">=</span> <span class="fl">2016</span><span class="op">)</span></code></pre></div>
</div>
<div id="output-format" class="section level2">
<h2 class="hasAnchor">
<a href="#output-format" class="anchor"></a>Output format</h2>
<p>The default is to return tidy data in a tibble data frame. You can set <code>tidy = FALSE</code> to return the list returned by <code><a href="https://rdrr.io/pkg/jsonlite/man/fromJSON.html">jsonlite::fromJSON</a></code> without any further processing.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, n <span class="op">=</span> <span class="fl">3</span>, tidy <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span>
<span class="co">#&gt; $request</span>
<span class="co">#&gt; $request$command</span>
<span class="co">#&gt; [1] "series"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $request$series_id</span>
<span class="co">#&gt; [1] "ELEC.CONS_TOT_BTU.COW-AK-98.A;ELEC.CONS_TOT_BTU.COW-AK-98.M;ELEC.CONS_TOT_BTU.COW-AK-98.Q"</span>
<span class="co">#&gt; </span>
<span class="co">#&gt; </span>
<span class="co">#&gt; $series</span>
<span class="co">#&gt;                       series_id                                                                         name         units f</span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-98.A    Total consumption (Btu) : coal : Alaska : electric power (total) : annual million MMBtu A</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-98.M   Total consumption (Btu) : coal : Alaska : electric power (total) : monthly million MMBtu M</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-98.Q Total consumption (Btu) : coal : Alaska : electric power (total) : quarterly million MMBtu Q</span>
<span class="co">#&gt;                                                                                                   description copyright                                      source iso3166</span>
<span class="co">#&gt; 1 Summation of all types of coal; Power plants owned by companies whose primary purpose is to produce power;       None EIA, U.S. Energy Information Administration  USA-AK</span>
<span class="co">#&gt; 2 Summation of all types of coal; Power plants owned by companies whose primary purpose is to produce power;       None EIA, U.S. Energy Information Administration  USA-AK</span>
<span class="co">#&gt; 3 Summation of all types of coal; Power plants owned by companies whose primary purpose is to produce power;       None EIA, U.S. Energy Information Administration  USA-AK</span>
<span class="co">#&gt;   geography  start    end                  updated                                          data</span>
<span class="co">#&gt; 1    USA-AK   2001   2019 2020-10-27T18:46:54-0400 2019, 2018, 2017, 11.03525, 10.37727, 9.21412</span>
<span class="co">#&gt; 2    USA-AK 200101 202008 2020-10-27T18:46:54-0400       202008, 202007, 202006, NA, NA, 0.77003</span>
<span class="co">#&gt; 3    USA-AK 2001Q1 2020Q2 2020-10-27T18:46:54-0400       2020Q2, 2020Q1, 2019Q4, NA, NA, 3.04527</span></code></pre></div>
<p>You can also return the raw JSON data in a character string if you need to process this directly with other code.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="https://rdrr.io/r/base/cat.html">cat</a></span><span class="op">(</span><span class="fu"><a href="../reference/eia_series.html">eia_series</a></span><span class="op">(</span><span class="va">id</span>, n <span class="op">=</span> <span class="fl">3</span>, tidy <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; {"request":{"command":"series","series_id":"ELEC.CONS_TOT_BTU.COW-AK-98.A;ELEC.CONS_TOT_BTU.COW-AK-98.M;ELEC.CONS_TOT_BTU.COW-AK-98.Q"},"series":[{"series_id":"ELEC.CONS_TOT_BTU.COW-AK-98.A","name":"Total consumption (Btu) : coal : Alaska : electric power (total) : annual","units":"million MMBtu","f":"A","description":"Summation of all types of coal; Power plants owned by companies whose primary purpose is to produce power; ","copyright":"None","source":"EIA, U.S. Energy Information Administration","iso3166":"USA-AK","geography":"USA-AK","start":"2001","end":"2019","updated":"2020-10-27T18:46:54-0400","data":[["2019",11.03525],["2018",10.37727],["2017",9.21412]]},{"series_id":"ELEC.CONS_TOT_BTU.COW-AK-98.M","name":"Total consumption (Btu) : coal : Alaska : electric power (total) : monthly","units":"million MMBtu","f":"M","description":"Summation of all types of coal; Power plants owned by companies whose primary purpose is to produce power; ","copyright":"None","source":"EIA, U.S. Energy Information Administration","iso3166":"USA-AK","geography":"USA-AK","start":"200101","end":"202008","updated":"2020-10-27T18:46:54-0400","data":[["202008",null],["202007",null],["202006",0.77003]]},{"series_id":"ELEC.CONS_TOT_BTU.COW-AK-98.Q","name":"Total consumption (Btu) : coal : Alaska : electric power (total) : quarterly","units":"million MMBtu","f":"Q","description":"Summation of all types of coal; Power plants owned by companies whose primary purpose is to produce power; ","copyright":"None","source":"EIA, U.S. Energy Information Administration","iso3166":"USA-AK","geography":"USA-AK","start":"2001Q1","end":"2020Q2","updated":"2020-10-27T18:46:54-0400","data":[["2020Q2",null],["2020Q1",null],["2019Q4",3.04527]]}]}</span></code></pre></div>
<p>This allows you to use the returned results with existing code you may have that requires data in one of these less processed structures.</p>
</div>
<div id="helpers-functions" class="section level2">
<h2 class="hasAnchor">
<a href="#helpers-functions" class="anchor"></a>Helpers functions</h2>
<div id="time-series-metadata" class="section level3">
<h3 class="hasAnchor">
<a href="#time-series-metadata" class="anchor"></a>Time series metadata</h3>
<p>There are some functions available that make small API calls and return only metadata associated with a time series dataset.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_series_metadata.html">eia_series_metadata</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 12</span>
<span class="co">#&gt;   series_id        name                         units    f     description                               copyright source            iso3166 geography start end   updated     </span>
<span class="co">#&gt;   &lt;chr&gt;            &lt;chr&gt;                        &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;                                     &lt;chr&gt;     &lt;chr&gt;             &lt;chr&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       </span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_B~ Total consumption (Btu) : c~ million~ A     "Summation of all types of coal; Power p~ None      EIA, U.S. Energy~ USA-AK  USA-AK    2001  2019  2020-10-27T~</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_B~ Total consumption (Btu) : c~ million~ M     "Summation of all types of coal; Power p~ None      EIA, U.S. Energy~ USA-AK  USA-AK    2001~ 2020~ 2020-10-27T~</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_B~ Total consumption (Btu) : c~ million~ Q     "Summation of all types of coal; Power p~ None      EIA, U.S. Energy~ USA-AK  USA-AK    2001~ 2020~ 2020-10-27T~</span>
<span class="fu"><a href="../reference/eia_series_metadata.html">eia_series_updates</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 2</span>
<span class="co">#&gt;   series_id                     updated                 </span>
<span class="co">#&gt;   &lt;chr&gt;                         &lt;chr&gt;                   </span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-98.A 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-98.M 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-98.Q 2020-10-27T18:46:54-0400</span>
<span class="fu"><a href="../reference/eia_series_metadata.html">eia_series_dates</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 333 x 4</span>
<span class="co">#&gt;    series_id                     date       eiadate date_format</span>
<span class="co">#&gt;    &lt;chr&gt;                         &lt;date&gt;     &lt;chr&gt;   &lt;chr&gt;      </span>
<span class="co">#&gt;  1 ELEC.CONS_TOT_BTU.COW-AK-98.A 2001-01-01 2001    A          </span>
<span class="co">#&gt;  2 ELEC.CONS_TOT_BTU.COW-AK-98.A 2002-01-01 2002    A          </span>
<span class="co">#&gt;  3 ELEC.CONS_TOT_BTU.COW-AK-98.A 2003-01-01 2003    A          </span>
<span class="co">#&gt;  4 ELEC.CONS_TOT_BTU.COW-AK-98.A 2004-01-01 2004    A          </span>
<span class="co">#&gt;  5 ELEC.CONS_TOT_BTU.COW-AK-98.A 2005-01-01 2005    A          </span>
<span class="co">#&gt;  6 ELEC.CONS_TOT_BTU.COW-AK-98.A 2006-01-01 2006    A          </span>
<span class="co">#&gt;  7 ELEC.CONS_TOT_BTU.COW-AK-98.A 2007-01-01 2007    A          </span>
<span class="co">#&gt;  8 ELEC.CONS_TOT_BTU.COW-AK-98.A 2008-01-01 2008    A          </span>
<span class="co">#&gt;  9 ELEC.CONS_TOT_BTU.COW-AK-98.A 2009-01-01 2009    A          </span>
<span class="co">#&gt; 10 ELEC.CONS_TOT_BTU.COW-AK-98.A 2010-01-01 2010    A          </span>
<span class="co">#&gt; # ... with 323 more rows</span>
<span class="fu"><a href="../reference/eia_series_metadata.html">eia_series_range</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 3 x 7</span>
<span class="co">#&gt;   series_id                     start_date end_date   start  end    date_format     n</span>
<span class="co">#&gt;   &lt;chr&gt;                         &lt;date&gt;     &lt;date&gt;     &lt;chr&gt;  &lt;chr&gt;  &lt;chr&gt;       &lt;int&gt;</span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-98.A 2001-01-01 2019-01-01 2001   2019   A              19</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-98.M 2001-01-01 2020-08-01 200101 202008 M             236</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-98.Q 2001-01-01 2020-04-01 2001Q1 2020Q2 Q              78</span>
<span class="fu"><a href="../reference/eia_series_metadata.html">eia_series_cats</a></span><span class="op">(</span><span class="va">id</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 6 x 3</span>
<span class="co">#&gt;   series_id                     category_id name                  </span>
<span class="co">#&gt;   &lt;chr&gt;                               &lt;int&gt; &lt;chr&gt;                 </span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-98.A         474 Electric power (total)</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-98.A         738 Coal                  </span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-98.M         474 Electric power (total)</span>
<span class="co">#&gt; 4 ELEC.CONS_TOT_BTU.COW-AK-98.M         738 Coal                  </span>
<span class="co">#&gt; 5 ELEC.CONS_TOT_BTU.COW-AK-98.Q         474 Electric power (total)</span>
<span class="co">#&gt; 6 ELEC.CONS_TOT_BTU.COW-AK-98.Q         738 Coal</span></code></pre></div>
<p>Like <code>eia_seires</code>, these functions accept an <code>id</code> vector. They always return a tibble data frame. <code>eia_series_cats</code> uses the <code>series categories</code> endpoint and accepts the <code>tidy</code> argument so that output from the endpoint may be a JSON string, list or the tibble data frame.</p>
</div>
<div id="eia-date-strings" class="section level3">
<h3 class="hasAnchor">
<a href="#eia-date-strings" class="anchor"></a>EIA date strings</h3>
<p>EIA date strings used to specify start and end dates for time series requests are character strings that are not in any standard date formats. There are several functions that assist with moving between these strings and standard dates.</p>
<p>You can convert EIA date strings to dates.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eiadate.html">eiadate_to_date</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"201803"</span>, <span class="st">"201804"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "2018-03-01" "2018-04-01"</span></code></pre></div>
<p>or dates to EIA format; here are examples using annual, quarterly and monthly time formats.</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eiadate.html">date_to_eiadate</a></span><span class="op">(</span><span class="st">"2018-05-14"</span>, <span class="st">"A"</span><span class="op">)</span>
<span class="co">#&gt; [1] "2018"</span>
<span class="fu"><a href="../reference/eiadate.html">date_to_eiadate</a></span><span class="op">(</span><span class="st">"2018-05-14"</span>, <span class="st">"Q"</span><span class="op">)</span>
<span class="co">#&gt; [1] "2018Q2"</span>
<span class="fu"><a href="../reference/eiadate.html">date_to_eiadate</a></span><span class="op">(</span><span class="st">"2018-05-14"</span>, <span class="st">"M"</span><span class="op">)</span>
<span class="co">#&gt; [1] "201805"</span></code></pre></div>
<p>It is also easy to create a date sequence from two EIA time stamps. The format is parsed from the first value (they are intended to always be consistent).</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/eiadate.html">eiadate_to_date_seq</a></span><span class="op">(</span><span class="st">"2018Q1"</span>, <span class="st">"2018Q4"</span><span class="op">)</span><span class="op">)</span>
<span class="co">#&gt; [1] "2018-01-01" "2018-04-01" "2018-07-01" "2018-10-01"</span>
<span class="fu"><a href="../reference/eiadate.html">date_to_eiadate</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>
<span class="co">#&gt; [1] "2018" "2018" "2018" "2018"</span></code></pre></div>
</div>
</div>
<div id="checking-for-data-updates" class="section level2">
<h2 class="hasAnchor">
<a href="#checking-for-data-updates" class="anchor"></a>Checking for data updates</h2>
<p>It is good practice to minimize the number of API calls you make wherever possible. One way to do this is to not request data that has not changed since you last requested it. You can make an API call to the EIA <code>updates</code> endpoint to check update times on data series. If any series have not been updated since you last obtained the data, then you know you do not need to request the data again.</p>
<p>The <code>eia_series_updates</code> function shown above is handy for checking the most recent data update times of a specific set of series IDs. However, it must make one or more API calls to do so. For general checks on a potentially large number of series without having to query them all, you should use <code>eia_updates</code>. This function takes a category ID and can return the last update times for all series under that category.</p>
<p>If a category level has no series directly associated with it, an empty data frame is returned.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_updates.html">eia_updates</a></span><span class="op">(</span><span class="fl">389</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 0 x 2</span>
<span class="co">#&gt; # ... with 2 variables: series_id &lt;chr&gt;, updated &lt;chr&gt;</span></code></pre></div>
<p>If a category has series available, paginated results are returned in a data frame. You can use <code>n</code> and <code>start</code> (together, unlike for general data requests with <code>eia_series</code>) to indicate how many rows to return and where to start. This helps you to cycle through pages of results. By default, <code>n = 50</code> and <code>start = 1</code>. The EIA API <code>updates</code> endpoint allows a maximum of <code>n = 10000</code>.</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_updates.html">eia_updates</a></span><span class="op">(</span><span class="fl">742</span>, n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   series_id                    updated                 </span>
<span class="co">#&gt;   &lt;chr&gt;                        &lt;chr&gt;                   </span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-1.A 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-1.M 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-1.Q 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 4 ELEC.CONS_TOT_BTU.COW-AL-1.A 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 5 ELEC.CONS_TOT_BTU.COW-AL-1.M 2020-10-27T18:46:54-0400</span></code></pre></div>
<p>Set <code>deep = TRUE</code> to obtain series associated with child categories. Category 389 above did not have series, but some of the child categories do.</p>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span class="fu"><a href="../reference/eia_updates.html">eia_updates</a></span><span class="op">(</span><span class="fl">389</span>, n <span class="op">=</span> <span class="fl">5</span>, deep <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>
<span class="co">#&gt; # A tibble: 5 x 2</span>
<span class="co">#&gt;   series_id                    updated                 </span>
<span class="co">#&gt;   &lt;chr&gt;                        &lt;chr&gt;                   </span>
<span class="co">#&gt; 1 ELEC.CONS_TOT_BTU.COW-AK-1.A 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 2 ELEC.CONS_TOT_BTU.COW-AK-1.M 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 3 ELEC.CONS_TOT_BTU.COW-AK-1.Q 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 4 ELEC.CONS_TOT_BTU.COW-AL-1.A 2020-10-27T18:46:54-0400</span>
<span class="co">#&gt; 5 ELEC.CONS_TOT_BTU.COW-AL-1.M 2020-10-27T18:46:54-0400</span></code></pre></div>
<p>The above example works to show this while using <code>n = 5</code> because there were no results for the top parent category. if there had been, it would likely be necessary to request more results in order to see that child series were included.</p>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p>Developed by <a href="https://github.com/leonawicz">Matthew Leonawicz</a>.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
