---
title: "EIA directories"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{EIA directories}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE, comment = "#>", out.width = "100%",
  message = FALSE, warning = FALSE, error = FALSE
)
library(eia)
options(eia_antidos = 0)
key <- Sys.getenv("EIA_KEY")
```

The first call below does not include a directory name and provides a data.frame
of all available categories. The second call shows all the sub-directories for which
there may be tertiary sub-folders, or data.

## Top level directory

```{r key, eval=FALSE}
library(eia)
# eia_set_key("yourkey") # set API key if not already set globally
```

Here is the top-level directory information.

```{r dir1}
eia_dir()
```

## Subdirectories

The directory folders from above can be used to obtain subdirectory folder paths
from which further subdirectories or data may be obtained.

```{r dir2}
eia_dir("electricity")
```

...and so on.

```{r dir3}
eia_dir("electricity/rto")
```

## Output format

The default is to return tidy data in a tibble data frame. For `eia_dir()` you can set `tidy = FALSE` to return the list returned by `jsonlite::fromJSON` without any further processing or `tidy = NA` to return the raw JSON data as a character string.

```{r dir4}
eia_dir(tidy = FALSE)
```
